<!DOCTYPE html>
<html lang="en">
<title>LAMAS: Da Vinci</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  "HTML-CSS": {
    styles: {".MathJax_Preview": {visibility: "hidden"}}
  },
  tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
  TeX: {extensions: ["AMSmath.js","AMSsymbols.js","http://sonoisa.github.io/xyjax_ext/xypic.js"]}
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>


<style>
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>


<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>
  <h4 class="w3-bar-item"><b>Jump to</b></h4>
  <a class="w3-bar-item w3-button w3-hover-black" href="#Introduction">Introduction</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#Models">Models</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#Simulation">Simulation</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#Strategies">Strategies</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#Conclusion">Conclusion and Discussion</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="https://github.com/mennoberend/LAMAS_davinci" target="_blank">Github project page</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="report.pdf" target="_blank">Download PDF report</a>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">

  
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal">The Da Vinci Code</h1>
      This is a project for the course Logical Aspects of Multi Agent Systems, taught at the University of Groningen in 2020. 
      By Maaike Los (s2995263), Thijs Eker (s2576597) and Menno Liefstingh (s2735059)





      <h2 id="Introduction">Introduction</h2>
<p>In this project, we will analyse the game ‘Da Vinci Code’. Da Vinci Code is a game in which players each get a secret code and have to guess the code of the other players. However, by guessing something of another player, you can also give information about your own code. Therefore, the players have to think carefully not only about what they know about the other players’ codes, but also about what they know about what the other players know about their codes, and about what the other players know about what they know about the other players’ codes, and that is where epistemic logic comes in.</p>
<h2 id="game-explanation">Game explanation</h2>
<p>The game consists of twelve black and twelve white blocks each with a number from 0 to 11 on it (each number occurring once on a black and once on a white block), and one black and one white block with a ‘-’ on it. From the back side, the thirteen white and thirteen black blocks are indistinguishable, it is only visible whether they are black or white.<br />
At the start of the game, each player takes a certain number of blocks (usually four or five, depending on the number of players), and places them on the table such that the player himself can see the numbers but the other players cannot. These blocks form this player’s code. The blocks have to be put in ascending order according to the numbers on them, where the ‘-’ can be placed at any place, and in case of equal numbers the black blocks come before the white blocks. Then in each turn the player whose turn it is takes one block from stack, looks what it is and then can guess one block of one other player’s code, e.g. “Is this white block a 1?". The other player must answer truthfully. If the guess was incorrect, the other player says “no” (he doesn’t have to tell what was the actual number on the block), and the player on turn has to reveal the block that he has just taken from the stack and put it at the correct place open in his code. His turn is then over and the next player may take a block from stack and guess a block from another player. If the guess was correct, the other player has to reveal the concerning block and lay it open at the correct place in his code (i.e. the place where it was already standing). The player on turn may - if he wants - guess another block of a player (which can be the same player or another), the same procedure repeats until a wrong guess is made, which ends the turn. He can also choose to not make another guess and add the block he drew to his code in the correct place.<br />
When the total code of a player is revealed, he is out and cannot guess the codes of the other players anymore. The game ends when the codes of all but one players are revealed, the remaining player is the winner.</p>
<h2 id="example-with-higher-order-knowledge">Example with higher order knowledge</h2>
<p>We will give an example to show where higher order knowledge might be needed in the game. Suppose that in a certain state of the game player <span class="math inline"><em>a</em></span> has the code [5,6,8,11], and player <span class="math inline"><em>b</em></span> has the code [4,9,10,-], all in black blocks (to make it an easy example). From player <span class="math inline"><em>a</em></span>, the 5 and the 8 are revealed and from player <span class="math inline"><em>b</em></span>, the 4, the 10 and the ‘-’ are revealed, so the visible codes are [5,?,8,?] for player <span class="math inline"><em>a</em></span> and [4,?,10,-] for player <span class="math inline"><em>b</em></span>. It is <span class="math inline"><em>b</em></span>’s turn. Player <span class="math inline"><em>b</em></span> can guess the hidden block of player <span class="math inline"><em>a</em></span> between the 5 and the 8, he has 50 % chance of guessing correct because it can be either a 6 or a 7. However, if player <span class="math inline"><em>b</em></span> does guess this block and guesses it wrong, all players know that he didn’t know whether it was a 6 or 7, so they all know that player <span class="math inline"><em>b</em></span> does not have the 6 or the 7 himself (for if he would have one of them, he would know the number on the block of player <span class="math inline"><em>a</em></span>). Then they can deduce that the hidden block of player <span class="math inline"><em>b</em></span> himself must be a 9, because except for 6 and 7 the only numbers between 4 and 10 are 5 and 8, which already lay open in player <span class="math inline"><em>a</em></span>’s code. Hence, if player <span class="math inline"><em>b</em></span> guesses that the hidden block of player <span class="math inline"><em>a</em></span> is a 7, he has by doing so given away his own code and can in the next turn of any player be out.</p>
    </div>


  <div class="w3-row">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" id="Models">Models</h1>
      <p>Let <span class="math inline"><em>A</em></span> be the set of players, with <span class="math inline">|<em>A</em>| = <em>m</em></span> and <span class="math inline"><em>N</em></span> the number of blocks each player has at the beginning of the game. We will use the system <span class="math inline"><em>S</em><sub>5(<em>m</em>)</sub></span> to form a Kripke model of a simplified version of the game. In this simplified version, there are only 12 blocks, namely the blocks 1-6 of both colors, there are 3 players, so <span class="math inline"><em>m</em> = 3</span> and each player has 4 blocks so <span class="math inline"><em>N</em> = 4</span>. We use this simplified version in order to need only a small representation, but it can easily be extended to a model with a different number of players, a different number of blocks, or a different number of blocks per person. We assume that players do not ask for numbers that are in their own code or of which they for some other reason know that cannot be correct (i.e. they will only make guesses that <em>can</em> be true). A Kripke model <span class="math inline"><em>M</em></span> is defined as <span class="math inline"><em>M</em> = (<em>S</em>, <em>π</em>, <em>R</em><sub>1</sub>, ..., <em>R</em><sub><em>m</em></sub>)</span> with</p>
<ol>
<li><p><span class="math inline"><em>S</em></span> a non-empty set of states,</p></li>
<li><p><span class="math inline"><em>π</em> : <em>S</em> → (<em>P</em> → {<em>t</em>, <em>f</em>})</span> a truth assignment for each propositional atom in each state,</p></li>
<li><p><span class="math inline"><em>R</em><sub><em>i</em></sub> ⊆ <em>S</em> × <em>S</em></span> <span class="math inline">(<em>i</em> = 1, ..., <em>m</em>)</span> a set of accessibility relations.</p></li>
</ol>
<p>Let us denote the white blocks as <span class="math inline"><em>W</em> = {<em>w</em>1, ..., <em>w</em>6}</span>, the black blocks as <span class="math inline"><em>B</em> = {<em>b</em>1, ..., <em>b</em>6}</span>, and the agents as <span class="math inline"><em>A</em> = {<em>a</em>, <em>b</em>, <em>c</em>}</span>.<br />
</p>
<h2 class="unnumbered" id="initial model">Initial model</h2>
<p>We can formalise the game as a Kripke model <span class="math inline"><em>M</em> = (<em>S</em>, <em>π</em>, <em>R</em><sub><em>a</em></sub>, <em>R</em><sub><em>b</em></sub>, <em>R</em><sub><em>c</em></sub>)</span>. We will start by creating a model of the beginning of the game. The states are defined as:</p>

<img src="images/equation.png" style="width:730px;">

<p> where <span class="math inline"><em>x</em><sub>1</sub>, ..., <em>x</em><sub>4</sub></span> represent the four blocks of player <span class="math inline"><em>x</em></span> and <span class="math inline"><em>p</em> ≺ <em>q</em></span> is defined as ‘the number on <span class="math inline"><em>p</em></span> is lower than the number on <span class="math inline"><em>q</em></span> or (the numbers on <span class="math inline"><em>p</em></span> and <span class="math inline"><em>q</em></span> are equal and <span class="math inline"><em>p</em></span> is black and <span class="math inline"><em>q</em></span> is white)’.<br />
If the players had no information at all about who had which blocks, there would be an accessibility relation between each pair of states: <br /><span class="math display"><em>R</em><sub><em>x</em></sub> = {(<em>s</em>, <em>t</em>) ∈ <em>S</em> × <em>S</em>}</span><br /> However, the players do have some information and hence we can add some restrictions on the accessibility relations. Since each player knows his own blocks but not those of the other players, the accessibility relations <span class="math inline"><em>R</em><sub><em>x</em></sub></span> of player <span class="math inline"><em>x</em></span> are restricted to pairs of states for which their own blocks are the same: <br /><span class="math display"><em>R</em><sub><em>x</em></sub> = {(<em>s</em>, <em>t</em>) ∈ <em>S</em> × <em>S</em>|⟨<em>x</em><sub>1<em>s</em></sub>, ...<em>x</em><sub>4<em>s</em></sub>⟩ = ⟨<em>x</em><sub>1<em>t</em></sub>, ..., <em>x</em><sub>4<em>t</em></sub>⟩}</span><br />, where <span class="math inline"><em>x</em><sub><em>i</em><em>s</em></sub></span> represents the <span class="math inline"><em>i</em></span>th block of player <span class="math inline"><em>x</em></span> in state <span class="math inline"><em>s</em></span>.<br />
Furthermore, each player can see the colour of the blocks of the other player, so in all accessible states the colour of all blocks are the same as in the current state: <br /><span class="math display"><em>R</em><sub><em>x</em></sub> = {(<em>s</em>, <em>t</em>) ∈ <em>S</em> × <em>S</em>|⟨<em>x</em><sub>1<em>s</em></sub>, ...<em>x</em><sub>4<em>s</em></sub>⟩ = ⟨<em>x</em><sub>1<em>t</em></sub>, ..., <em>x</em><sub>4<em>t</em></sub>⟩}, <em>y</em><sub><em>i</em><em>s</em></sub> ∈ <em>W</em> ⇔ <em>y</em><sub><em>i</em><em>t</em></sub> ∈ <em>W</em> for all <em>y</em> ∈ <em>A</em></span><br /></p>
<h2 id="taking-turns">Taking turns</h2>
<p>When it is player <span class="math inline"><em>a</em></span>’s turn, he will guess a block of another player. There are two possibilities, either he can guess right or guess wrong. When he guesses right, the block is revealed to everyone, so the value of that block becomes common knowledge (every player can see the value, and every player knows that every player can see the value, and every player knows that every player knows that every player can see the value, etc.). In the accessibility relations <span class="math inline"><em>R</em><sub><em>i</em></sub></span> of all agents, the relations to states with a different value for that block will be removed. If he guesses wrong, everyone knows that that block does not have that value, so the relations to states with that value will be removed from every player’s accessibility relations.<br />
Because we assumed that players only make guesses that can be true, the guess can also give the other players some information about the player in turn. All states in which the current player has a block with the number and colour of his guess will be removed from the accessibility relations of the other player, and possibly other deductions can be made.</p>
<h2 class="unnumbered" id="example-1">Example 1</h2>
<p>In this section we will illustrate the model defined above by an example. Assume that player <span class="math inline"><em>a</em></span> has the blocks [<span class="math inline"><em>b</em>1, <em>b</em>4, <em>b</em>5, <em>w</em>6</span>], player <span class="math inline"><em>b</em></span> has [<span class="math inline"><em>b</em>2, <em>w</em>2, <em>w</em>4, <em>b</em>6</span>], and player <span class="math inline"><em>c</em></span> has [<span class="math inline"><em>w</em>1, <em>b</em>3, <em>w</em>3, <em>w</em>5</span>]. Because the number of possible states is quite large, we only look from the point of view of player <span class="math inline"><em>a</em></span>. Player <span class="math inline"><em>a</em></span> only sees his own blocks and the colour of the blocks of the other players. He can deduce right from the start that the white 1 should be the first block of player <span class="math inline"><em>c</em></span> (because if it would be at a different position, there would be another block in front of it, which could only be the black 1 due to the ordering of the numbers, but he has the black 1 himself). In the same way, he can deduce that the black 6 is the last block of player <span class="math inline"><em>b</em></span>, because the only number that can follow the black 6 is the white 6, which he has himself. Therefore, considering the ordering of the blocks, there are only six possible states from the point of view of player <span class="math inline"><em>a</em></span>. The model with the possible states and accessibility relations for player <span class="math inline"><em>a</em></span> is shown in  <a href="#fig:model1" data-reference-type="ref" data-reference="fig:model1">figure 1</a>. The real state is the state at the top. Reflexive arrows have been left out of the picture, but are there for every state.</p>

<img id="fig:model1" src="images/fig1.png" style="width:500px;">

<p>Now suppose that player <span class="math inline"><em>b</em></span> starts and asks whether the third block of player <span class="math inline"><em>c</em></span> is a 3. Player <span class="math inline"><em>c</em></span> has to answer truthfully that this is indeed the case. Now, all models without a 3 on this place can be removed. The resulting model is shown in <a href="#fig:model2" data-reference-type="ref" data-reference="fig:model2">figure 2</a>.</p>
<p>Not all actions of other players give information to all other players. Suppose that now it is player <span class="math inline"><em>c</em></span>’s turn, and he asks whether the first block of player <span class="math inline"><em>b</em></span> is a 2. Player <span class="math inline"><em>b</em></span> will answer affirmatively, but for player <span class="math inline"><em>a</em></span>, this is of no interest because he already knew that this block was a 2. After this turn, for player <span class="math inline"><em>a</em></span> the model is still as shown in <a href="#fig:model2" data-reference-type="ref" data-reference="fig:model2">figure 2</a>.<br />
Now when it is player <span class="math inline"><em>a</em></span>’s turn, he only has to discriminate between the two states shown in <a href="#fig:model2" data-reference-type="ref" data-reference="fig:model2">figure 2</a>, so by for example asking whether the last block of player <span class="math inline"><em>c</em></span> is a 5, he will be able to deduce which of the two states is the real state.</p>

<img id="fig:model2" src="images/fig2.png" style="width:500px;">

<h2 class="unnumbered" id="example-2">Example 2</h2>
<p>In order to show a model with accessibility relations for all agents, we take an even more simplified example. Suppose that only the numbers 1, 2, and 3 are in the game for both colours, so every player has only 2 blocks. Suppose that player <span class="math inline"><em>a</em></span> has two black blocks, player <span class="math inline"><em>b</em></span> has one white and one black block, and player <span class="math inline"><em>c</em></span> has two white blocks. This is common knowledge, because everyone can see the colour of the blocks of every player, and knows that the others can see this as well, and knows that the others know that everyone knows, et cetera. Now the Kripke model representing the start of the game is as shown in <a href="#fig:model3" data-reference-type="ref" data-reference="fig:model3">figure 3</a>. The accessibility relations for player <span class="math inline"><em>a</em>, <em>b</em>,</span> and <span class="math inline"><em>c</em></span> are shown in red, magenta, and cyan respectively. As can be seen in the model, player <span class="math inline"><em>b</em></span> only has reflexive accessibility relations, because there are no two states in which the blocks of player <span class="math inline"><em>b</em></span> are the same. This shows that player <span class="math inline"><em>b</em></span> immediately knows everything. On the other hand, for players <span class="math inline"><em>a</em></span> and <span class="math inline"><em>c</em></span>, there are some states that are indistinguishable from each other.</p>

<img id="fig:model3" src="images/fig3.png" style="width:500px;">

<h2 class="unnumbered" id="example-3">Example 3</h2>
<p>(Example from introduction) In this third example, we will show the way higher order knowledge can play a role in the game. Suppose that only all black blocks are in the game, and they are divided such that player <span class="math inline"><em>a</em></span> has [5,6,8,11], player <span class="math inline"><em>b</em></span> has [4,9,10,-], and player <span class="math inline"><em>c</em></span> has [0,1,2,3]. The 7 is not yet in the game. The 5, 8, 4, 10 and - are revealed already. We look from the perspective of player <span class="math inline"><em>c</em></span>. For him, there are six possible states. In <a href="#fig:model4" data-reference-type="ref" data-reference="fig:model4">figure 4</a> the Kripke model from the perspective of player <span class="math inline"><em>c</em></span> is shown. The accessibility relations for agent <span class="math inline"><em>c</em></span> have not been drawn, but are there between every pair of worlds. Also, the reflexive relations are left out, but are there for every world for every agent. The bold numbers denote the numbers that are revealed and therefore are common knowledge among all agents. Now suppose it is the turn of agent <span class="math inline"><em>b</em></span>. He cannot discriminate between the real state (the top left state), and the top right state where agent <span class="math inline"><em>a</em></span> has a 7 instead of a 6. Therefore, he asks player <span class="math inline"><em>a</em></span> whether his second block is a 7, to which player <span class="math inline"><em>a</em></span> must give a negative answer. To player <span class="math inline"><em>c</em></span>, this gives different types of information. Suppose that <span class="math inline"><em>a</em><sub>7</sub></span> is the proposition referring to the fact that the second block of player <span class="math inline"><em>a</em></span> is a 7. Of course, now player <span class="math inline"><em>c</em></span> knows that <span class="math inline"><em>a</em></span> does not have the 7: <span class="math inline"><em>K</em><sub><em>c</em></sub>¬<em>a</em><sub>7</sub></span>. But also he knows that player <span class="math inline"><em>b</em></span> did not know: <span class="math inline"><em>K</em><sub><em>c</em></sub>¬<em>K</em><sub><em>b</em></sub>¬<em>a</em><sub>7</sub></span>. He can therefore cancel out the worlds in which this is not true from his possible worlds. <span class="math inline">(<em>M</em>, <em>w</em><sub>3</sub>) ⊨ <em>a</em><sub>7</sub></span>, <span class="math inline">(<em>M</em>, <em>w</em><sub>4</sub>) ⊨ <em>a</em><sub>7</sub></span>, and <span class="math inline">(<em>M</em>, <em>w</em><sub>5</sub>) ⊨ <em>a</em><sub>7</sub></span>, and <span class="math inline">(<em>M</em>, <em>w</em><sub>1</sub>) ⊨ <em>K</em><sub><em>b</em></sub>¬<em>a</em><sub>7</sub></span> (in all worlds <span class="math inline"><em>s</em></span> with <span class="math inline">(<em>w</em><sub>1</sub>, <em>s</em>) ∈ <em>R</em><sub><em>b</em></sub>, (<em>M</em>, <em>s</em>) ⊨ ¬<em>a</em><sub>7</sub></span>: these worlds are exactly <span class="math inline"><em>w</em><sub>1</sub></span> and <span class="math inline"><em>w</em><sub>2</sub></span>), and in the same way <span class="math inline">(<em>M</em>, <em>w</em><sub>2</sub>) ⊨ <em>K</em><sub><em>b</em></sub>¬<em>a</em><sub>7</sub></span>. Hence, the only remaining world for <span class="math inline"><em>c</em></span> is <span class="math inline"><em>w</em><sub>0</sub></span>.</p>

<img id="fig:model4" src="images/fig4.png" style="width:500px">

<h2 id="action-model">Action model</h2>
<p>We can also describe the situation as an action model. The only ‘real’ action that can be taken in the game is the action of asking a block from another player, but we discriminate between a right guess and a wrong guess. Because every action that is taken and every answer are public, the relations in the action model are equal for all agents. The precondition for the action ‘wrong guess’ (<code>wg</code>) is that the guessed number is not on that block and that the person who asks does not know this, while the precondition for the action ‘right guess’ (<code>rg</code>) is just that the guessed number is indeed there. When someone makes a right guess, we do not know whether he knew the value of that block or he did not know and just made a lucky guess. Let us denote the proposition that block <span class="math inline"><em>x</em><sub><em>i</em></sub></span> (i.e. the <span class="math inline"><em>i</em></span>th block of player <span class="math inline"><em>x</em></span>) has number <span class="math inline"><em>p</em></span> as ‘<span class="math inline"><em>x</em><em>i</em><sub><em>p</em></sub></span>’. We can then define an action model for the game as a structure <span class="math inline">⟨<em>E</em>, ∼,pre⟩</span> with</p>
<ul>
<li><p><span class="math inline"><em>E</em> = {<code>rg</code>(<em>x</em><em>i</em><sub><em>p</em></sub>), <code>wg</code>(<em>x</em><em>i</em><sub><em>p</em></sub>)|<em>x</em> ∈ <em>A</em>, <em>i</em> ∈ <em>N</em>, <em>p</em> ∈ <em>W</em> ∪ <em>B</em>}</span></p></li>
<li><p><span class="math inline"> ∼  = {(<em>e</em>, <em>e</em>)|<em>e</em> ∈ <em>E</em>}</span></p></li>
<li><p>pre(<code>rg</code>(<span class="math inline"><em>x</em><em>i</em><sub><em>p</em></sub></span>)) = <span class="math inline"><em>x</em><em>i</em><sub><em>p</em></sub></span>,<br />
pre(<code>wg(xi_p)</code>)=<span class="math inline">¬<em>x</em><em>i</em><sub><em>p</em></sub> ∧ ¬<em>K</em><sub><em>a</em></sub>¬<em>x</em><em>i</em><sub><em>p</em></sub></span> with <span class="math inline"><em>a</em></span> the agent that performs the action</p></li>
</ul>
<p>When we combine the model from Example 3 with the action of agent <span class="math inline"><em>b</em></span> guessing that the second block of <span class="math inline"><em>a</em></span> is a 7, we get the action model shown in <a href="#fig:actionmodel1" data-reference-type="ref" data-reference="fig:actionmodel1">figure 5</a>.</p>


<img id="fig:actionmodel1" src="images/fig5.png" style="width:500px">
    </div>
  </div>

  <div class="w3-row w3-padding-64">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" id="Simulation">Simulation</h1>





      <p>To supplement our research and visualise the theory of mind of different agents, we built a simulation of a simple scenario where agents play against each other and model their knowledge states. This simulation features both a Graphical User Interface (GUI) and a command line interface. In the GUI it is possible to let several logical agents play against each other and observe the moves they make based on their respective strategies. We also included a mode where you can join the logical players and try out their reactions to guesses you make. The command line interface can be used to simulate series of games for comparing the strategies with different game settings. Furthermore both the GUI and commandline versions of the simulation have the possibility of setting the total amount of players, their strategies (for the non-human players), the total amount of blocks in the game and with how many blocks every player will start. When using the GUI to view a game it is possible to get insight into the logical beliefs of every agent, in the form of a sort of local Kripke model. This model shows the worlds one agent currently considers possible and relations between them, closely resembling the graph in <a href="#fig:model4" data-reference-type="ref" data-reference="fig:model4">figure 4</a>.</p>
<p>We also added a view of the complete Kripke model, showing all worlds that at least some agents regard as possible and the relations between these worlds. In all Kripke models in the simulation, the reflexive relations are not drawn, but are there for every agent for every world. In the images below we show some examples of our GUI and the drawing of local and global Kripke models. You can click the images to enlarge them. </p>

<style>
div.gallery {
  margin: 5px;
  border: 1px solid #ccc;
  float: left;
  width: 180px;
}

div.gallery:hover {
  border: 1px solid #777;
}

div.gallery img {
  width: 100%;
  height: auto;
}

div.desc {
  padding: 15px;
  text-align: center;
}
</style>

<body>

<div class="gallery">
  <a target="_blank" href="images/sim1.jpeg">
    <img src="images/sim1.jpeg" alt="Example 1" height="600">
  </a>
  
</div>

<div class="gallery">
  <a target="_blank" href="images/sim2.jpeg">
    <img src="images/sim2.jpeg" alt="Example 2" height="600">
  </a>
  <div class="desc">Example of GUI with global Kripke model</div>
</div>

<div class="gallery">
  <a target="_blank" href="images/sim3.jpeg">
    <img src="images/sim3.jpeg" alt="Example 3" height="600">
  </a>
  <div class="desc">Example of GUI with global Kripke model</div>
</div>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>


<h2 id="kripke-models-in-the-simulation">Kripke models in the simulation</h2>
<p>In the beginning of the game, the local Kripke model of an agent consists of the worlds that he considers possible, i.e. the worlds in which he himself has the blocks he has in reality, and the other players have blocks that agree with the colours of the blocks they have in reality, as explained in section <a href="#initial model" data-reference-type="ref" data-reference="initial model">[initial model]</a>. The global Kripke model at the start of the game consists of the combination of the local Kripke models of all agents.</p>
<p>When some player takes the action <span class="math inline"><code>rg</code>(<em>x</em><em>i</em><sub><em>p</em></sub>)</span>, i.e. guessing correctly that the <span class="math inline"><em>i</em></span>th block of player <span class="math inline"><em>x</em></span> is number <span class="math inline"><em>p</em></span>, then that block is revealed, so all the worlds where that block has a different value are removed (for all players, because the action is public). When player <span class="math inline"><em>a</em></span> takes the action <span class="math inline"><code>wg</code>(<em>x</em><em>i</em><sub><em>p</em></sub>)</span>, i.e. guessing incorrectly that the <span class="math inline"><em>i</em></span>th block of player <span class="math inline"><em>x</em></span> is number <span class="math inline"><em>p</em></span>, everyone knows that that block does not have number <span class="math inline"><em>p</em></span> so all the worlds where the value of the block <em>is</em> <span class="math inline"><em>p</em></span> are removed. Furthermore, all players know that player <span class="math inline"><em>a</em></span> did not know that that block was not <span class="math inline"><em>p</em></span>, so for every player, all relations to worlds in which that player knows that <span class="math inline"><em>K</em><sub><em>a</em></sub><em>x</em><em>i</em><sub><em>p</em></sub></span> are removed. This may be different per player, e.g. player <span class="math inline"><em>c</em></span> might know that player <span class="math inline"><em>a</em></span> knows something in a certain world, while player <span class="math inline"><em>b</em></span> does not know that player <span class="math inline"><em>a</em></span> knows this.<br />
For every player, the relations to worlds where player <span class="math inline"><em>a</em></span>, according to their knowledge, did not know that <span class="math inline"><em>x</em><em>i</em><sub><em>p</em></sub></span> are removed (the worlds themselves are not removed because they might still be accessible for other players). Hence the relations to worlds <span class="math inline"><em>s</em></span> where for all <span class="math inline"><em>t</em></span> with <span class="math inline">(<em>s</em>, <em>t</em>) ∈ <em>R</em><sub><em>a</em></sub>, (<em>M</em>, <em>t</em>) ⊨ ¬<em>x</em><em>i</em><sub><em>p</em></sub></span> are removed. This is because in such a world where all relations of <span class="math inline"><em>a</em></span> are to worlds where <span class="math inline"><em>x</em><em>i</em><sub><em>p</em></sub></span> is not true, player <span class="math inline"><em>a</em></span> knows that <span class="math inline">¬<em>x</em><em>i</em><sub><em>p</em></sub></span>, and hence he would never guess <span class="math inline"><em>x</em><em>i</em><sub><em>p</em></sub></span>.<br />
An example of this is shown in Example 3 (see Figure <a href="#fig:model4" data-reference-type="ref" data-reference="fig:model4">[fig:model4]</a>), where the relations of <span class="math inline"><em>c</em></span> to <span class="math inline"><em>w</em><sub>1</sub></span> and <span class="math inline"><em>w</em><sub>2</sub></span> are removed because <span class="math inline">(<em>M</em>, <em>w</em><sub>1</sub>) ⊨ <em>K</em><sub><em>b</em></sub>¬<em>a</em>2<sub>7</sub></span> (in all worlds <span class="math inline"><em>s</em></span> with <span class="math inline">(<em>w</em><sub>1</sub>, <em>s</em>) ∈ <em>R</em><sub><em>b</em></sub>, (<em>M</em>, <em>s</em>) ⊨ ¬<em>a</em>2<sub>7</sub></span>: these worlds are exactly <span class="math inline"><em>w</em><sub>1</sub></span> and <span class="math inline"><em>w</em><sub>2</sub></span>), and in the same way <span class="math inline">(<em>M</em>, <em>w</em><sub>2</sub>) ⊨ <em>K</em><sub><em>b</em></sub>¬<em>a</em>2<sub>7</sub></span>.</p>
<h2 id="possible-strategies">Possible strategies</h2>
<p>The game lends itself to some strategic possibilities. Some strategic considerations that players have to make are the following:</p>
<ul>
<li><p>When player <span class="math inline"><em>a</em></span> guesses another player’s block, all other players will know that player <span class="math inline"><em>a</em></span> does not have that block him- or herself.</p></li>
<li><p>Always consider other players’ blocks as well. If player <span class="math inline"><em>b</em></span> has mainly black blocks and player <span class="math inline"><em>a</em></span> mainly white blocks, player <span class="math inline"><em>a</em></span> should remember that <span class="math inline"><em>b</em></span> has a lot of information about the distribution of black blocks when deciding to reveal player <span class="math inline"><em>c</em></span>’s black or white blocks. To maximize the amount of worlds for other players and minimize their own possible worlds,</p></li>
<li><p>The more blocks of a certain color are revealed, the easier it becomes to eliminate the ones that are still hidden.</p></li>
<li><p>The objective of the earlier stages of the game is to reveal as many blocks as possible, while keeping your own blocks hidden. This gives you an advantage in the last stage of the game, where players have to attempt to close all blocks on the board to win. Keeping your own blocks hidden (so not guessed by another player or revealed by your own queries) gives you a higher percentage of exclusive knowledge on this final set.</p></li>
<li><p>When all your blocks have been revealed by other players, you lose the game and are unable to keep guessing.</p></li>
</ul>
    </div>
  </div>

<div class="w3-row w3-padding-64">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" id="Strategies">Strategies</h1>

        <p>With this knowledge in mind, we devised two different strategies for the simulated players, basing them on their own knowledge and Kripke models. The <em>defensive</em> strategy is based on not giving away any knowledge and profit from the other players giving away their knowledge. To do this, we compute how many possible worlds remain for other players in case the guess is right, and how many remain if the guess is wrong. We multiply these values by the chance of the guess being right or wrong, and choose the guess that results in the most worlds remaining for the other players.<br />
The <em>aggressive</em> strategy is based on exploring as much as possible to quickly win the game. It tries to minimise the amount of possible worlds for the player. The method for this is the same as for the first strategy, but we compute how many worlds are left for the player and choose the guess that eliminates the largest amount of possibilities.</p>
<h2 id="aggressive-strategy">Aggressive Strategy</h2>
<p>In this strategy we simulate every possible guess the agent could make and observe the amount of possible worlds that are left after making the possible guess. Afterwards we select the hypothetical guesses that resulted in the lowest amount of possible worlds. To handle the fact that it is not known whether a guess is correct, we have to take a weighted average between the amount of worlds left when the guess is correct and the amount of worlds left when the guess is incorrect.<br />
For every possible guess we take the amount of worlds if the guess is right <span class="math inline"><em>w</em><sub><em>r</em></sub></span> and the amount of worlds if the guess is wrong <span class="math inline"><em>w</em><sub><em>f</em></sub></span>. Then we can define the weighted average as follows: <br /><span class="math display">$$weighted\_average = w_r * \frac{w_r}{w_r + w_f} + w_f * \frac{w_f}{w_r + w_f}$$</span><br /> All we have to do after calculating this for every possible move is select the move for which this weighted average is lowest, thus the move with the lowest average number of worlds.</p>
<h2 id="defensive-strategy">Defensive Strategy</h2>
<p>For the defensive strategy we simulate all possible moves in a similar fashion. The difference is that now we would like to compare them based on how a move influences the amount of possible worlds of the other agents. This is not a straightforward computation, since the agents don’t have access to the full knowledge of their opponents. What we do have is a set of hypothetical relations for the other agents between worlds we ourselves regard as possible. Every set of worlds that are accessible from each other for an opponent can be a subset of the set of real worlds they see as possible. Therefore we choose the move that maximises the average size of these hypothetical sets of worlds. If we take <span class="math inline"><em>A</em></span> to be the set of our opponents and <span class="math inline"><em>S</em><sub><em>a</em></sub></span> to be the set of all the sets of worlds that are accessible from each other for agent <span class="math inline"><em>a</em></span>, we can define the criterion <span class="math inline"><em>c</em></span> for selecting the best move for the defensive strategy as follows: <br /><span class="math display">$$c=\frac{\sum_{a\in A}\frac{\sum_{s\in S_a} |s|}{|S_a|}}{|A|}$$</span><br /> Then we can introduce a similar weighting as was done for the aggressive strategy, with <span class="math inline"><em>c</em><sub><em>r</em></sub></span> being the calculated criterion if the guess was right and <span class="math inline"><em>c</em><sub><em>f</em></sub></span> when the guess was wrong: <br /><span class="math display">$$weighted\_average = c_r * \frac{w_r}{w_r + w_f} + c_f * \frac{w_f}{w_r + w_f}$$</span><br /> Taking the argmax of this weighted average over all possible moves gives the optimal move.</p>

<h2 id="experiment">Experiment</h2>
<h3 id="setup">Setup</h3>
<p>In order to test the performance of the different strategies, we conduct a small experiment. We have two kinds of logical players: one that tries to get as much information per turn as possible and therefore minimises his own number of possible worlds (aggressive), and one that tries to give as little information as possible to the other players, and therefore tries to maximise the number of possible worlds for the other players (defensive).<br />
We looked at three different scenarios, one with two players both playing according to a different strategy, one with 4 players in which half of the players are aggressive and the other half defensive, and one scenario with 3 players where half of the games feature two defensive players and half two aggressive players.<br />
We altered the total amount of tiles in the game, and the amount of closed tiles on the table (related to the number of tiles in each player’s hand). The total set of tiles is always evenly divided over black and white, and goes from 1 up to half of the total amount, e.g. if the total amount of tiles is 18, the black and white tiles from 1 to 9 are in the game. We looked at the percentage of games that players of a strategy won, over a total of 1000 games. In every game, the starting player was chosen at random.</p>
<h3 id="results">Results</h3>
<p><span id="table2" label="table2">Table 1</span></p>
<div id="table1">
<table>
<caption>Average win percentage over 10000 games, for 1 aggressive and 1 defensive player</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Amount of tiles</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="even">
<td style="text-align: left;">Amount of closed tiles on table</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Win rate aggressive strategy</td>
<td style="text-align: left;">49.6%</td>
<td style="text-align: left;">50.5%</td>
<td style="text-align: left;">50.0%</td>
<td style="text-align: left;">50.1%</td>
</tr>
</tbody>
</table>
</div>


<p><span id="table3" label="table3">Table 2</span></p>
<div id="table2">
<table>
<caption>Average win percentage over 10000 games, for 3 players (half of the time 2 aggressive and the other half 2 defensive player</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Amount of tiles</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">22</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">Amount of closed tiles on table</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Win rate aggressive strategy</td>
<td style="text-align: left;">50.0%</td>
<td style="text-align: left;">60.4%</td>
<td style="text-align: left;">68.4%</td>
<td style="text-align: left;">70.7%</td>
<td style="text-align: left;">70.7%</td>
<td style="text-align: left;">69.9%</td>
<td style="text-align: left;">68.0%</td>
</tr>
</tbody>
</table>
</div>


<p><span id="table1" label="table1">Table 3</span></p>
<div id="table3">
<table>
<caption>Average win percentage over 1000 games, for 2 aggressive and 2 defensive players</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Amount of tiles</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">Amount of closed tiles on table</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Win rate aggressive strategy</td>
<td style="text-align: left;">76.3%</td>
<td style="text-align: left;">74.5%</td>
<td style="text-align: left;">72.1%</td>
<td style="text-align: left;">69.9%</td>
</tr>
</tbody>
</table>
</div>

<p><a href="table1" data-reference-type="ref" data-reference="table1">Table 1</a> shows the results for two players. We can see that no matter how much uncertainty is involved in the game, the win rate seems to be about 50% for both strategies. The results for the three player game can be seen in <a href="table2" data-reference-type="ref" data-reference="table2">table 2</a>. We initially only looked at the games up until 6 closed tiles. For these first results we see that with more uncertainty the aggressive player starts playing better. After retrieving some interesting results for the 4 player experiment we decided to look into some games with even more uncertainty than that. These later games with 8-12 closed tiles seem to indicate a different relation, here the defensive strategy starts winning ground with more uncertainty. The results for four players that can be seen in <a href="#table3" data-reference-type="ref" data-reference="table3">table 3</a> show a similar trend: when there are more tiles in the game the defensive strategy start winning more games.</p>
</div>
<

<div class="w3-row w3-padding-64">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" id="Conclusion">Conclusion and Discussion</h1>


      <h3>Experiment results</h3>
<p>When looking at results for games with two players, the defensive and aggressive strategy seem to perform equally. This is because in a scenario with two players, the defensive strategy basically comes down to the aggressive strategy. This is caused by the fact that when one strategy is unable to distinguish between a set of moves, the agent will use the other strategy to further filter out moves. In the case of two players, the defensive strategy will never score any move higher than another move, since the local Kripke model of the agents can not contain any worlds that are indistinguishable for the opponent (in other words, all sets of accessible worlds for the opponent in our local Kripke are only 1 world large). For the first setup with no closed tiles, this is not super important since the player who can start always immediately wins and therefore the win rate is also about 50%.</p>
<p>The three player scenarios results might be the most interesting of the different setups. In the first setup without any closed tiles, the 50% winrate can be explained by acknowledging that the defensive player is playing an aggressive strategy for the same reasons as mentioned before. After that, all games show the aggressive to be the dominant strategy, but the relative performance of the strategies is influenced a lot by how much uncertainty there is in the game. For the games with 2-6 closed tiles we see the aggressive strategy perform better when there is more uncertainty in the game. This is probably caused by the defensive player using the defensive strategy more and the defensive strategy being inferior for games with little uncertainty. From 8 closed tiles and onwards the trend in the opposite direction can be explained by the defensive strategy getting better when there is more uncertainty. One can imagine that protecting your knowledge is worth more when that knowledge is not easy to figure out from the rest of the game.</p>
<p>Finally in a situation with 4 players, the aggressive strategy is again overall better than the defensive strategy, but decreases in performance when the number of blocks increases. Although it is not entirely clear why this is the case, it might have to do with the fact that in more unsure situations, it is easier for the defensive players to indeed keep their tiles secret, which makes the defensive strategy work better in these scenarios.</p>

        <h3>Conclusion</h3>
        <p>In this project, we analysed the game ‘Da Vinci Code’ using formal logic and Kripke semantics. Kripke models can help to understand the mechanisms underlying the game, and to visualise the knowledge of agents in different states of the game. Kripke models can also help agents playing the game making decisions in the game. In the small experiment that we performed, we found out that using Kripke semantics can influence the chance of winning the game for an agent.</p>
        <h3>Discussion</h3>
<p>There are a few things that could be improved in the current project, or that could be interesting for further research. Because of restrictions on computing power, we simplified the game in our models. We restricted the number of blocks that are used, and we omitted the joker block ‘-’. Also, we kept the number of blocks that a player has stable throughout the game, while in the real game there is the possibility of adding a block to your code every turn. Implementing this facets of the game could be interesting, but especially adding the joker block will increase the complexity of the models because it adds a lot of uncertainty - and hence a lot of possible states - to the game. Adding the joker block could be beneficial for the defensive strategy as it seems to respond well to more uncertainty. Also receiving a new block when guessing correct is probably more beneficial for the defensive player because they tend to guess right more often.<br />
One other drawback to the simulation that we built is that when playing the game yourself in the simulation, the logical players assume that all other players are also perfect logicians and reason in a logical manner. Therefore, when a human player makes irrational guesses, the logical players will get confused, i.e., their Kripke models about what other players know might not be correct anymore. This would happen for example when a human player makes an incorrect guess about a block that he could have known, because in such a case the logical player will assume that the human player could not know this. A way to circumvent this problem is to let the application give a warning when a human player tries to make an irrational guess.</p>
<p>In the experiment we tested games with three players, but didn’t have time to go into the effects of having more or less players of certain strategy. Therefore in future research we would like to see the effect of an aggressive player play against 3 defensive players or the other way around. Having more defensive players in a game would probably be similar to having more unknown tiles in the game, since the players don’t give away information. Therefore in a situation with more defensive players and some closed tiles it could be the case that the defensive strategy outperforms the aggressive strategy. We cannot be sure how the results would be in situations with more aggressive than defensive players, but we expect them not to be much different from situations with an equal division of strategies.</p>
</div>

</div>
</div>

  </div>
</div>




  <footer id="myFooter">
    <div class="w3-container w3-theme-l2 w3-padding-32">
      <h4>Footer</h4>
    </div>

    <div class="w3-container w3-theme-l1">
      <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    </div>
  </footer>

<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
